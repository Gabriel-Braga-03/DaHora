unit Controller.Inicial;

interface
    // Rotinas de Controle
    procedure criarNovoArquivo(nome: String; aulas: Byte);

implementation
    uses 
        System.SysUtils,
        Controller.Principal,
        Model.Horario,
        Model.FileManager;

    // Implemetações
    procedure criarNovoArquivo(nome: String; aulas: Byte);
    var
        arq_nome: String;
    begin
        // Criando instância de Gerenciador de Arquivos
        Controller.Principal.fm := TFileManager.Create('_docs', true);

        // Criando _docs se não existir
        if not fm.existDir() then fm.createDir();
        
        // Gerando nome do Arquivo
        arq_nome := 'hor-'+ FormatDateTime('dd-mm-yyyy_hh-nn-ss', Now()) + '.json';

        // Criando o arquivo
        Controller.Principal.fm.setArqPath('./_docs/'+ arq_nome);
        Controller.Principal.fm.createArq();

        // Criando instância de objeto de Horário JSON
        Controller.Principal.horario := THorario.Create();
        Controller.Principal.horario.nome := nome;
        Controller.Principal.horario.aulas_pd := aulas;

        // Salvando no arquivo
        
    end;

end.
